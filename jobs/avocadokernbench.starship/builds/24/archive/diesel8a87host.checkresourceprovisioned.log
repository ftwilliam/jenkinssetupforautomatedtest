+ cd /var/lib/jenkins
+ ./checkresourceprovisioned.sh diesel8a87host
+ set -e
+ ping -c 1 diesel8a87host
+ ssh -q -o PasswordAuthentication=no -o StrictHostKeyChecking=no jenkins@diesel8a87host 'test ! -f checkfornewkerneltag.sh'
+ ssh-keygen -R diesel8a87host
+ ssh -o PasswordAuthentication=no -o StrictHostKeyChecking=no root@diesel8a87host :
Warning: Permanently added 'diesel8a87host,10.236.11.71' (ECDSA) to the list of known hosts.
+ ssh root@diesel8a87host
Pseudo-terminal will not be allocated because stdin is not a terminal.
Welcome to Ubuntu 17.10 (GNU/Linux 4.18.0-rc2-jenkins x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

New release '18.04 LTS' available.
Run 'do-release-upgrade' to upgrade to it.

mesg: ttyname failed: Inappropriate ioctl for device

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
bison is already the newest version (2:3.0.4.dfsg-1build1).
build-essential is already the newest version (12.4ubuntu1).
flex is already the newest version (2.6.1-1.3).
libelf-dev is already the newest version (0.170-0.1).
net-tools is already the newest version (1.60+git20161116.90da8a0-1ubuntu1).
cpuid is already the newest version (20170122-1).
htop is already the newest version (2.0.2-1).
rpm is already the newest version (4.12.0.2+dfsg1-2build2).
git is already the newest version (1:2.14.1-1ubuntu4.1).
libssl-dev is already the newest version (1.0.2g-1ubuntu13.5).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
Suggested packages:
  rdnssd
The following packages will be upgraded:
  ifupdown
1 upgraded, 0 newly installed, 0 to remove and 76 not upgraded.
Need to get 55.3 kB of archives.
After this operation, 1,024 B of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu artful-updates/main amd64 ifupdown amd64 0.8.16ubuntu2.1 [55.3 kB]
debconf: unable to initialize frontend: Dialog
debconf: (TERM is not set, so the dialog frontend is not usable.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Fetched 55.3 kB in 0s (116 kB/s)
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 582613 files and directories currently installed.)
Preparing to unpack .../ifupdown_0.8.16ubuntu2.1_amd64.deb ...
Unpacking ifupdown (0.8.16ubuntu2.1) over (0.8.16ubuntu2) ...
Setting up ifupdown (0.8.16ubuntu2.1) ...
Processing triggers for ureadahead (0.100.0-20) ...
Processing triggers for systemd (234-2ubuntu12.1) ...
Processing triggers for man-db (2.7.6.1-2) ...

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
lib32z1 is already the newest version (1:1.2.11.dfsg-0ubuntu2).
lib32z1-dev is already the newest version (1:1.2.11.dfsg-0ubuntu2).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 76 not upgraded.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
libncurses5-dev is already the newest version (6.0+20160625-1ubuntu1).
acpica-tools is already the newest version (20160831-1).
nasm is already the newest version (2.13.01-2).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
The following additional packages will be installed:
  libuuid1
The following packages will be upgraded:
  libuuid1 uuid-dev
2 upgraded, 0 newly installed, 0 to remove and 74 not upgraded.
Need to get 41.6 kB of archives.
After this operation, 0 B of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu artful-updates/main amd64 uuid-dev amd64 2.30.1-0ubuntu4.2 [26.9 kB]
Get:2 http://us.archive.ubuntu.com/ubuntu artful-updates/main amd64 libuuid1 amd64 2.30.1-0ubuntu4.2 [14.7 kB]
debconf: unable to initialize frontend: Dialog
debconf: (TERM is not set, so the dialog frontend is not usable.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Fetched 41.6 kB in 0s (186 kB/s)
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 582613 files and directories currently installed.)
Preparing to unpack .../uuid-dev_2.30.1-0ubuntu4.2_amd64.deb ...
Unpacking uuid-dev:amd64 (2.30.1-0ubuntu4.2) over (2.30.1-0ubuntu4.1) ...
Preparing to unpack .../libuuid1_2.30.1-0ubuntu4.2_amd64.deb ...
Unpacking libuuid1:amd64 (2.30.1-0ubuntu4.2) over (2.30.1-0ubuntu4.1) ...
Setting up libuuid1:amd64 (2.30.1-0ubuntu4.2) ...
Setting up uuid-dev:amd64 (2.30.1-0ubuntu4.2) ...
Processing triggers for libc-bin (2.26-0ubuntu2.1) ...
Processing triggers for man-db (2.7.6.1-2) ...

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
bridge-utils is already the newest version (1.5-9ubuntu2).
golang is already the newest version (2:1.8~1ubuntu1).
liblzma-dev is already the newest version (5.2.2-1.3).
libyaml-dev is already the newest version (0.1.7-2ubuntu3).
python-dev is already the newest version (2.7.14-2ubuntu1).
python-networkx is already the newest version (1.11-1ubuntu1).
python-pip is already the newest version (9.0.1-2).
libvirt-dev is already the newest version (3.6.0-1ubuntu6.8).
openvswitch-switch is already the newest version (2.8.1-0ubuntu0.17.10.2).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 74 not upgraded.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
libpopt-dev is already the newest version (1.16-10).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
The following NEW packages will be installed:
  libblkid-dev
The following packages will be upgraded:
  libblkid1
1 upgraded, 1 newly installed, 0 to remove and 73 not upgraded.
Need to get 266 kB of archives.
After this operation, 844 kB of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu artful-updates/main amd64 libblkid1 amd64 2.30.1-0ubuntu4.2 [119 kB]
Get:2 http://us.archive.ubuntu.com/ubuntu artful-updates/main amd64 libblkid-dev amd64 2.30.1-0ubuntu4.2 [147 kB]
debconf: unable to initialize frontend: Dialog
debconf: (TERM is not set, so the dialog frontend is not usable.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
dpkg-preconfigure: unable to re-open stdin: 
Fetched 266 kB in 0s (722 kB/s)
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 582613 files and directories currently installed.)
Preparing to unpack .../libblkid1_2.30.1-0ubuntu4.2_amd64.deb ...
Unpacking libblkid1:amd64 (2.30.1-0ubuntu4.2) over (2.30.1-0ubuntu4) ...
Setting up libblkid1:amd64 (2.30.1-0ubuntu4.2) ...
Selecting previously unselected package libblkid-dev:amd64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 582613 files and directories currently installed.)
Preparing to unpack .../libblkid-dev_2.30.1-0ubuntu4.2_amd64.deb ...
Unpacking libblkid-dev:amd64 (2.30.1-0ubuntu4.2) ...
Setting up libblkid-dev:amd64 (2.30.1-0ubuntu4.2) ...
Processing triggers for libc-bin (2.26-0ubuntu2.1) ...
Processing triggers for man-db (2.7.6.1-2) ...
Requirement already satisfied: snakefood in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: pynacl in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: netifaces in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: libvirt-python in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: six in /usr/lib/python2.7/dist-packages (from pynacl)
Requirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python2.7/dist-packages (from pynacl)
Requirement already satisfied: pycparser in /usr/local/lib/python2.7/dist-packages (from cffi>=1.4.1->pynacl)

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
Package 'ufw' is not installed, so not removed
Package 'whoopsie' is not installed, so not removed
Package 'apparmor' is not installed, so not removed
Package 'apport' is not installed, so not removed
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 73 not upgraded.
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-4.18.0-rc2-jenkins
Found initrd image: /boot/initrd.img-4.18.0-rc2-jenkins
Found linux image: /boot/vmlinuz-4.18.0-rc1-jenkins
Found initrd image: /boot/initrd.img-4.18.0-rc1-jenkins
Found linux image: /boot/vmlinuz-4.17.0-jenkins
Found initrd image: /boot/initrd.img-4.17.0-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc7-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc7-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc6-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc6-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc5-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc5-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc4-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc4-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc3-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc3-jenkins
Found linux image: /boot/vmlinuz-4.16.0-rc2-jenkins
Found initrd image: /boot/initrd.img-4.16.0-rc2-jenkins
Found linux image: /boot/vmlinuz-4.13.0-45-generic
Found initrd image: /boot/initrd.img-4.13.0-45-generic
Found linux image: /boot/vmlinuz-4.13.0-21-generic
Found initrd image: /boot/initrd.img-4.13.0-21-generic
Adding boot menu entry for EFI firmware configuration
done
Synchronizing state of unattended-upgrades.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable unattended-upgrades
Synchronizing state of sddm.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable sddm
Synchronizing state of cups.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable cups
Synchronizing state of cups-browsed.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable cups-browsed
Synchronizing state of network-manager.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable network-manager
Synchronizing state of networking.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable networking
--2018-06-26 11:33:39--  http://sos-infrastructure/fileserv/test_infrastructure/grubby/grubby.tar.bz2
Resolving sos-infrastructure (sos-infrastructure)... 10.236.13.189
Connecting to sos-infrastructure (sos-infrastructure)|10.236.13.189|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 67614 (66K) [application/x-bzip2]
Saving to: ‘grubby.tar.bz2’

     0K .......... .......... .......... .......... .......... 75%  140M 0s
    50K .......... ......                                     100%  182M=0s

2018-06-26 11:33:39 (148 MB/s) - ‘grubby.tar.bz2’ saved [67614/67614]

--2018-06-26 11:33:39--  http://sos-infrastructure/fileserv/test_infrastructure/grubby/grubby_ubuntu.patch
Resolving sos-infrastructure (sos-infrastructure)... 10.236.13.189
Connecting to sos-infrastructure (sos-infrastructure)|10.236.13.189|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3322 (3.2K) [text/x-diff]
Saving to: ‘grubby_ubuntu.patch’

     0K ...                                                   100%  200M=0s

2018-06-26 11:33:39 (200 MB/s) - ‘grubby_ubuntu.patch’ saved [3322/3322]

checking file grubby.c
checking file test.sh
gcc -O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector -std=gnu99 -Wall -Werror -Wno-error=unused-function -Wno-unused-function -ggdb -DVERSION='"8.40"' -c -o grubby.o grubby.c
gcc -O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector -std=gnu99 -Wall -Werror -Wno-error=unused-function -Wno-unused-function -ggdb -DVERSION='"8.40"' -c -o log.o log.c
gcc -O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector -std=gnu99 -Wall -Werror -Wno-error=unused-function -Wno-unused-function -ggdb  -o grubby grubby.o log.o -lblkid -lpopt
mkdir -p /sbin
mkdir -p //man8
install -m 755 new-kernel-pkg /sbin
install -m 644 new-kernel-pkg.8 //man8
install -m 755 installkernel /sbin
install -m 644 installkernel.8 //man8
if [ -f grubby ]; then \
	install -m 755 grubby /sbin ; \
	install -m 644 grubby.8 //man8 ; \
fi
+ ssh root@diesel8a87host 'cat > /etc/network/interfaces'
+ ssh root@diesel8a87host 'cat > /etc/skel/.nanorc'
+ ssh root@diesel8a87host 'useradd -m -s /bin/bash -G sudo jenkins && echo jenkins:amd123 | chpasswd'
useradd: user 'jenkins' already exists
