+ cd /var/lib/jenkins
+ ./checkresourceprovisioned.sh diesel8a87host
+ set -e
+ ping -c 1 diesel8a87host
+ ssh -q -o PasswordAuthentication=no -o StrictHostKeyChecking=no jenkins@diesel8a87host 'test ! -f checkfornewkerneltag.sh'
+ ssh-keygen -R diesel8a87host
+ ssh -o PasswordAuthentication=no -o StrictHostKeyChecking=no root@diesel8a87host :
Warning: Permanently added 'diesel8a87host,10.236.11.71' (ECDSA) to the list of known hosts.
+ ssh root@diesel8a87host
Pseudo-terminal will not be allocated because stdin is not a terminal.
Welcome to Ubuntu 17.10 (GNU/Linux 4.18.0-rc2-jenkins x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

New release '18.04 LTS' available.
Run 'do-release-upgrade' to upgrade to it.

mesg: ttyname failed: Inappropriate ioctl for device

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
bison is already the newest version (2:3.0.4.dfsg-1build1).
build-essential is already the newest version (12.4ubuntu1).
flex is already the newest version (2.6.1-1.3).
libelf-dev is already the newest version (0.170-0.1).
net-tools is already the newest version (1.60+git20161116.90da8a0-1ubuntu1).
cpuid is already the newest version (20170122-1).
htop is already the newest version (2.0.2-1).
rpm is already the newest version (4.12.0.2+dfsg1-2build2).
git is already the newest version (1:2.14.1-1ubuntu4.1).
ifupdown is already the newest version (0.8.16ubuntu2.1).
libssl-dev is already the newest version (1.0.2g-1ubuntu13.5).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 73 not upgraded.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
lib32z1 is already the newest version (1:1.2.11.dfsg-0ubuntu2).
lib32z1-dev is already the newest version (1:1.2.11.dfsg-0ubuntu2).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 73 not upgraded.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
libncurses5-dev is already the newest version (6.0+20160625-1ubuntu1).
acpica-tools is already the newest version (20160831-1).
nasm is already the newest version (2.13.01-2).
uuid-dev is already the newest version (2.30.1-0ubuntu4.2).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 73 not upgraded.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
bridge-utils is already the newest version (1.5-9ubuntu2).
golang is already the newest version (2:1.8~1ubuntu1).
liblzma-dev is already the newest version (5.2.2-1.3).
libyaml-dev is already the newest version (0.1.7-2ubuntu3).
python-dev is already the newest version (2.7.14-2ubuntu1).
python-networkx is already the newest version (1.11-1ubuntu1).
python-pip is already the newest version (9.0.1-2).
libvirt-dev is already the newest version (3.6.0-1ubuntu6.8).
openvswitch-switch is already the newest version (2.8.1-0ubuntu0.17.10.2).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 73 not upgraded.

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
libpopt-dev is already the newest version (1.16-10).
libblkid-dev is already the newest version (2.30.1-0ubuntu4.2).
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 73 not upgraded.
Requirement already satisfied: snakefood in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: pynacl in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: netifaces in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: libvirt-python in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: six in /usr/lib/python2.7/dist-packages (from pynacl)
Requirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python2.7/dist-packages (from pynacl)
Requirement already satisfied: pycparser in /usr/local/lib/python2.7/dist-packages (from cffi>=1.4.1->pynacl)

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
Package 'ufw' is not installed, so not removed
Package 'whoopsie' is not installed, so not removed
Package 'apparmor' is not installed, so not removed
Package 'apport' is not installed, so not removed
The following packages were automatically installed and are no longer required:
  linux-headers-4.13.0-21 linux-headers-4.13.0-21-generic
  linux-image-4.13.0-21-generic linux-image-extra-4.13.0-21-generic
Use 'apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 73 not upgraded.
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-4.18.0-rc2-jenkins
Found initrd image: /boot/initrd.img-4.18.0-rc2-jenkins
Found linux image: /boot/vmlinuz-4.18.0-rc1-jenkins
Found initrd image: /boot/initrd.img-4.18.0-rc1-jenkins
Found linux image: /boot/vmlinuz-4.17.0-jenkins
Found initrd image: /boot/initrd.img-4.17.0-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc7-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc7-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc6-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc6-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc5-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc5-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc4-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc4-jenkins
Found linux image: /boot/vmlinuz-4.17.0-rc3-jenkins
Found initrd image: /boot/initrd.img-4.17.0-rc3-jenkins
Found linux image: /boot/vmlinuz-4.16.0-rc2-jenkins
Found initrd image: /boot/initrd.img-4.16.0-rc2-jenkins
Found linux image: /boot/vmlinuz-4.13.0-45-generic
Found initrd image: /boot/initrd.img-4.13.0-45-generic
Found linux image: /boot/vmlinuz-4.13.0-21-generic
Found initrd image: /boot/initrd.img-4.13.0-21-generic
Adding boot menu entry for EFI firmware configuration
done
Synchronizing state of unattended-upgrades.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable unattended-upgrades
Synchronizing state of sddm.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable sddm
Synchronizing state of cups.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable cups
Synchronizing state of cups-browsed.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable cups-browsed
Synchronizing state of network-manager.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable network-manager
Synchronizing state of networking.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable networking
--2018-06-26 11:42:55--  http://sos-infrastructure/fileserv/test_infrastructure/grubby/grubby.tar.bz2
Resolving sos-infrastructure (sos-infrastructure)... 10.236.13.189
Connecting to sos-infrastructure (sos-infrastructure)|10.236.13.189|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 67614 (66K) [application/x-bzip2]
Saving to: ‘grubby.tar.bz2.7’

     0K .......... .......... .......... .......... .......... 75%  125M 0s
    50K .......... ......                                     100%  183M=0s

2018-06-26 11:42:55 (136 MB/s) - ‘grubby.tar.bz2.7’ saved [67614/67614]

--2018-06-26 11:42:55--  http://sos-infrastructure/fileserv/test_infrastructure/grubby/grubby_ubuntu.patch
Resolving sos-infrastructure (sos-infrastructure)... 10.236.13.189
Connecting to sos-infrastructure (sos-infrastructure)|10.236.13.189|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3322 (3.2K) [text/x-diff]
Saving to: ‘grubby_ubuntu.patch.7’

     0K ...                                                   100%  154M=0s

2018-06-26 11:42:55 (154 MB/s) - ‘grubby_ubuntu.patch.7’ saved [3322/3322]

checking file grubby.c
checking file test.sh
make: Nothing to be done for 'all'.
mkdir -p /sbin
mkdir -p //man8
install -m 755 new-kernel-pkg /sbin
install -m 644 new-kernel-pkg.8 //man8
install -m 755 installkernel /sbin
install -m 644 installkernel.8 //man8
if [ -f grubby ]; then \
	install -m 755 grubby /sbin ; \
	install -m 644 grubby.8 //man8 ; \
fi
+ ssh root@diesel8a87host 'cat > /etc/network/interfaces'
+ ssh root@diesel8a87host 'cat > /etc/skel/.nanorc'
+ ssh root@diesel8a87host 'useradd -m -s /bin/bash -G sudo jenkins && echo jenkins:amd123 | chpasswd'
useradd: user 'jenkins' already exists
+ :
+ ./ssh-copy-id.expect jenkins@diesel8a87host
spawn ssh-copy-id -o StrictHostKeyChecking=no jenkins@diesel8a87host
/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/var/lib/jenkins/.ssh/id_rsa.pub"
/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed

/bin/ssh-copy-id: WARNING: All keys were skipped because they already exist on the remote system.
		(if you think this is a mistake, you may want to use -f option)

send: spawn id exp4 not open
    while executing
"send "amd123\n""
    (file "./ssh-copy-id.expect" line 5)
